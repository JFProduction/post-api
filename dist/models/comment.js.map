{"version":3,"sources":["../../server/models/comment.js"],"names":["Schema","Promise","global","commentSchema","text","type","String","required","createdAt","Date","default","now","isDeleted","Boolean","_creator","ObjectId","ref","_post","autoPopulateCreator","next","populate","path","select","pre","Comment","model"],"mappings":";;;;;;AAAA;;;;;;IAEQA,M,sBAAAA,M;;;AAER,mBAASC,OAAT,GAAmBC,OAAOD,OAA1B;;AAEA,IAAME,gBAAgB,IAAIH,MAAJ,CAAW;AAC7BI,UAAM,EAAEC,MAAMC,MAAR,EAAgBC,UAAU,IAA1B,EADuB;AAE7BC,eAAW,EAAEH,MAAMI,IAAR,EAAcC,SAASD,KAAKE,GAA5B,EAFkB;AAG7BC,eAAW,EAAEP,MAAMQ,OAAR,EAAiBH,SAAS,KAA1B,EAHkB;AAI7BI,cAAU,EAAET,MAAML,OAAOe,QAAf,EAAyBC,KAAK,MAA9B,EAJmB;AAK7BC,WAAO,EAAEZ,MAAML,OAAOe,QAAf,EAAyBC,KAAK,MAA9B;AALsB,CAAX,CAAtB;;AAQA,IAAME,sBAAsB,SAAtBA,mBAAsB,CAASC,IAAT,EAAe;AACvC,SAAKC,QAAL,CAAc;AACVC,cAAM,UADI;AAEVC,gBAAQ;AAFE,KAAd;AAIAH;AACH,CAND;;AAQAhB,cAAcoB,GAAd,CAAkB,MAAlB,EAA0BL,mBAA1B;;AAEA,IAAMM,UAAU,mBAASC,KAAT,CAAe,SAAf,EAA0BtB,aAA1B,CAAhB;kBACeqB,O","file":"comment.js","sourcesContent":["import mongoose from 'mongoose'\n\nconst { Schema } = mongoose\n\nmongoose.Promise = global.Promise\n\nconst commentSchema = new Schema({\n    text: { type: String, required: true },\n    createdAt: { type: Date, default: Date.now },\n    isDeleted: { type: Boolean, default: false },\n    _creator: { type: Schema.ObjectId, ref: 'User' },\n    _post: { type: Schema.ObjectId, ref: 'Post' },\n})\n\nconst autoPopulateCreator = function(next) {\n    this.populate({\n        path: '_creator',\n        select: 'username createdAt -_id'\n    })\n    next()\n}\n\ncommentSchema.pre('find', autoPopulateCreator)\n\nconst Comment = mongoose.model('Comment', commentSchema)\nexport default Comment"]}