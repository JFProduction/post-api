{"version":3,"sources":["../../server/controllers/commentController.js"],"names":["commentController","post","req","res","body","userId","text","postId","comment","Comment","_creator","_post","save","then","newComment","Post","findByIdAndUpdate","$push","_id","existingPost","status","json","success","data","catch","err","message"],"mappings":";;;;;;AAAA;;;;;;AAEA,IAAMA,oBAAoB,EAA1B;;AAEAA,kBAAkBC,IAAlB,GAAyB,UAACC,GAAD,EAAMC,GAAN,EAAc;AAAA,oBACFD,IAAIE,IADF;AAAA,QAC3BC,MAD2B,aAC3BA,MAD2B;AAAA,QACnBC,IADmB,aACnBA,IADmB;AAAA,QACbC,MADa,aACbA,MADa;;AAGnC;;AAEA,QAAMC,UAAU,IAAI,iBAAGC,OAAP,CAAe;AAC3BH,kBAD2B;AAE3BI,kBAAUL,MAFiB;AAG3BM,eAAOJ;AAHoB,KAAf,CAAhB;;AAMAC,YAAQI,IAAR,GAAeC,IAAf,CAAoB,UAACC,UAAD,EAAgB;AAChC,yBAAGC,IAAH,CAAQC,iBAAR,CACIT,MADJ,EAEI,EAAEU,OAAO,EAAE,aAAaH,WAAWI,GAA1B,EAAT,EAFJ,EAGEL,IAHF,CAGO,UAACM,YAAD,EAAkB;AACrBhB,gBAAIiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBC,yBAAS,IADQ;AAEjBC,sBAAMT,UAFW;AAGjBK;AAHiB,aAArB;AAKH,SATD,EASGK,KATH,CASS,UAACC,GAAD,EAAS;AACdtB,gBAAIiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBK,yBAASD;AADQ,aAArB;AAGH,SAbD;AAcH,KAfD,EAeGD,KAfH,CAeS,UAACC,GAAD,EAAS;AACdtB,YAAIiB,MAAJ,CAAW,GAAX,EAAgBC,IAAhB,CAAqB;AACjBK,qBAASD;AADQ,SAArB;AAGH,KAnBD;AAoBH,CA/BD;;kBAiCezB,iB","file":"commentController.js","sourcesContent":["import db from './../models'\n\nconst commentController = {}\n\ncommentController.post = (req, res) => {\n    const { userId, text, postId } = req.body\n\n    // validation\n\n    const comment = new db.Comment({\n        text,\n        _creator: userId,\n        _post: postId,\n    })\n\n    comment.save().then((newComment) => {\n        db.Post.findByIdAndUpdate(\n            postId,\n            { $push: { '_comments': newComment._id } },\n        ).then((existingPost) => {\n            res.status(200).json({\n                success: true,\n                data: newComment,\n                existingPost,\n            })\n        }).catch((err) => {\n            res.status(500).json({\n                message: err,\n            })\n        })\n    }).catch((err) => {\n        res.status(500).json({\n            message: err,\n        })\n    })\n}\n\nexport default commentController"]}